<%
field_type ||= :text_field
other_options = {}
other_options[:icon] = icon if defined?(icon)
other_options[:label] = field_attributes[:label].presence
%>

<% if form.object.errors[attribute].present? %>
  <% field_attributes[:data] ||= {} %>
  <% field_attributes[:data][:error] = form.object.errors[attribute].to_sentence %>
<% end %>

<% if block_given? %>
  <% content_for :help do %>
    <%= yield %>
  <% end %>
<% end %>

<%= render "shared/fields/#{field_type}", form: form, method: attribute, options: field_attributes, other_options: other_options %>
