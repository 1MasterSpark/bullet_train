<%
field_attributes ||= {}
other_options = {}
other_options[:icon] = icon if defined?(icon)
%>

<% if form.object.errors[attribute].present? %>
  <% field_attributes[:data] ||= {} %>
  <% field_attributes[:data][:error] = form.object.errors[attribute].to_sentence %>
<% end %>

<% if block_given? %>
  <% content_for :help do %>
    <%= yield %>
  <% end %>
<% end %>

<%= render "shared/fields/select", form: form, method: attribute, choices: options, options: field_attributes, other_options: other_options %>
